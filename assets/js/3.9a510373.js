(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{272:function(s,n,a){s.exports=a.p+"assets/img/1.f9af6704.png"},273:function(s,n,a){s.exports=a.p+"assets/img/2.e9b7039f.png"},274:function(s,n,a){s.exports=a.p+"assets/img/3.c55bbaca.png"},275:function(s,n,a){s.exports=a.p+"assets/img/4.a5893c2c.png"},276:function(s,n,a){s.exports=a.p+"assets/img/6.0dad705c.png"},277:function(s,n,a){s.exports=a.p+"assets/img/5.86ec564f.png"},278:function(s,n,a){s.exports=a.p+"assets/img/6.1.a56d7929.png"},279:function(s,n,a){s.exports=a.p+"assets/img/6.2.77897499.png"},280:function(s,n,a){s.exports=a.p+"assets/img/6.3.b8a42b89.png"},334:function(s,n,a){"use strict";a.r(n);var t=a(16),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"coding平台vue项目构建计划设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#coding平台vue项目构建计划设置","aria-hidden":"true"}},[s._v("#")]),s._v(" coding平台vue项目构建计划设置")]),s._v(" "),t("p",[s._v("首先创建制品仓库\n"),t("img",{attrs:{src:a(272),alt:"创建制品仓库"}}),s._v("\n创建构建计划，选择自定义构建计划\n"),t("img",{attrs:{src:a(273),alt:"创建构建计划"}}),s._v("\n然后配置基础信息\n"),t("img",{attrs:{src:a(274),alt:"配置基础信息"}}),s._v("\n流程配置\n"),t("img",{attrs:{src:a(275),alt:"流程配置"}}),s._v("\n流程配置代码：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pipeline {\n  agent any\n  stages {\n    stage('检出') {\n      steps {\n        checkout([\n          $class: 'GitSCM',\n          branches: [[name: env.GIT_BUILD_REF]],\n          userRemoteConfigs: [[\n            url: env.GIT_REPO_URL,\n            credentialsId: env.CREDENTIALS_ID\n          ]]])\n        }\n      }\n      stage('构建') {\n        steps {\n          sh '''NEWSVNVER=$(git rev-parse  --short HEAD)\nif [ ! -f \"svnver.dat\" ]; then\nOLDSVNVER=0\nelse\nread OLDSVNVER<svnver.dat\nfi\nif [ \"$OLDSVNVER\" = \"$NEWSVNVER\" ]; then\necho \\'版本无变化，跳过构建\\'\nelse\necho \\'版本已变化，执行构建\\'\nnpm install\nnpm run build\necho $NEWSVNVER > svnver.dat\nfi'''\n          archiveArtifacts(artifacts: '*_*.tar.gz', allowEmptyArchive: true, onlyIfSuccessful: true)\n        }\n      }\n      stage('打包') {\n        steps {\n          sh '''rm -rf ./${DEPOT_NAME}_${BRANCH_NAME}*.tar.gz\ncd ./idcMonitorWeb/\nttt=$(git log -1 --format=%ad --date=format:%Y%m%d)\necho \"\x3c!-- ${ttt}_${GIT_BRANCH}_${GIT_COMMIT_SHORT}_${CI_BUILD_NUMBER} --\x3e\" >> ./index.html\ntar zcvf ../${DEPOT_NAME}_${BRANCH_NAME}.tar.gz ./\ncd ..'''\n        }\n      }\n      stage('提交制品库') {\n        steps {\n          codingArtifactsGeneric(files: '${env.DEPOT_NAME}_${env.BRANCH_NAME}*.tar.gz', credentialsId: '', withBuildProps: true, repoName: 'production', version: '${env.GIT_COMMIT_SHORT}', repoURL: '')\n        }\n      }\n    }\n  }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("p",[s._v("以上是生成.tar.gz包，接下来我放一个生成zip包的例子")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pipeline {\n  agent any\n  stages {\n    stage('检出') {\n      steps {\n        checkout([\n          $class: 'GitSCM',\n          branches: [[name: env.GIT_BUILD_REF]],\n          userRemoteConfigs: [[\n            url: env.GIT_REPO_URL,\n            credentialsId: env.CREDENTIALS_ID\n          ]]])\n        }\n      }\n      stage('构建') {\n        steps {\n          sh '''NEWSVNVER=$(git rev-parse  --short HEAD)\nif [ ! -f \"svnver.dat\" ]; then\nOLDSVNVER=0\nelse\nread OLDSVNVER<svnver.dat\nfi\nif [ \"$OLDSVNVER\" = \"$NEWSVNVER\" ]; then\necho \\'版本无变化，跳过构建\\'\nelse\necho \\'版本已变化，执行构建\\'\nnpm install\nnpm run build\necho $NEWSVNVER > svnver.dat\nfi'''\n          archiveArtifacts(artifacts: '*_*.zip', allowEmptyArchive: true, onlyIfSuccessful: true)\n        }\n      }\n      stage('打包') {\n        steps {\n          sh '''rm -rf ./${DEPOT_NAME}*.zip\ncd ./idcMonitorWeb/\nttt=$(git log -1 --format=%ad --date=format:%Y%m%d)\necho \"\x3c!-- ${ttt}_${GIT_BRANCH}_${GIT_COMMIT_SHORT}_${CI_BUILD_NUMBER} --\x3e\" >> ./index.html\nzip -r ../${DEPOT_NAME}.zip ./\ncd ..'''\n        }\n      }\n      stage('提交制品库') {\n        steps {\n          codingArtifactsGeneric(files: '${env.DEPOT_NAME}*.zip', credentialsId: '', withBuildProps: true, repoName: 'production', version: '${env.GIT_COMMIT_SHORT}', repoURL: '')\n        }\n      }\n    }\n  }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("p",[s._v("选择制品库\n"),t("img",{attrs:{src:a(276),alt:"选择制品库"}}),s._v("\n设置变量与缓存\n"),t("img",{attrs:{src:a(277),alt:"设置变量与缓存"}}),s._v("\n以上就是配置的全过程")]),s._v(" "),t("p",[s._v("如果想把打包好的压缩包，推到其它制品库，需要先获取凭证，具体操作流程如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(278),alt:"凭证管理"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(279),alt:"增加凭证"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(280),alt:"上传到指定仓库"}})])])}),[],!1,null,null,null);n.default=e.exports}}]);